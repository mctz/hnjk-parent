(function(c){c.fn.media=function(l,k,m){if(l=="undo"){return this.each(function(){var o=c(this);var n=o.data("media.origHTML");if(n){o.replaceWith(n)}})}return this.each(function(){if(typeof l=="function"){m=k;k=l;l={}}var w=g(this,l);if(typeof k=="function"){k(this,w)}var u=i();var n=u.exec(w.src.toLowerCase())||[""];w.type?n[0]=w.type:n.shift();for(var t=0;t<n.length;t++){fn=n[t].toLowerCase();if(e(fn[0])){fn="fn"+fn}if(!c.fn.media[fn]){continue}var s=c.fn.media[fn+"_player"];if(!w.params){w.params={}}if(s){var q=s.autoplayAttr=="autostart";w.params[s.autoplayAttr||"autoplay"]=q?(w.autoplay?1:0):w.autoplay?true:false}var p=c.fn.media[fn](this,w);p.css("backgroundColor",w.bgColor).width(w.width);if(w.canUndo){var v=c("<div></div>").append(this);p.data("media.origHTML",v.html())}if(typeof m=="function"){m(this,p[0],w,s.name)}break}})};c.fn.media.mapFormat=function(l,k){if(!l||!k||!c.fn.media.defaults.players[k]){return}l=l.toLowerCase();if(e(l[0])){l="fn"+l}c.fn.media[l]=c.fn.media[k];c.fn.media[l+"_player"]=c.fn.media.defaults.players[k]};c.fn.media.defaults={standards:false,canUndo:true,width:400,height:400,autoplay:0,bgColor:"#ffffff",params:{wmode:"transparent"},attrs:{},flvKeyName:"file",flashvars:{},flashVersion:"7",expressInstaller:null,flvPlayer:"mediaplayer.swf",mp3Player:"mediaplayer.swf",silverlight:{inplaceInstallPrompt:"true",isWindowless:"true",framerate:"24",version:"0.9",onError:null,onLoad:null,initParams:null,userContext:null}};c.fn.media.defaults.players={flash:{name:"flash",title:"Flash",types:"flv,mp3,swf",mimetype:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer",ieAttrs:{classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-oleobject",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+c.fn.media.defaults.flashVersion}},quicktime:{name:"quicktime",title:"QuickTime",mimetype:"video/quicktime",pluginspage:"http://www.apple.com/quicktime/download/",types:"aif,aiff,aac,au,bmp,gsm,mov,mid,midi,mpg,mpeg,mp4,m4a,psd,qt,qtif,qif,qti,snd,tif,tiff,wav,3g2,3gp",ieAttrs:{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab"}},realplayer:{name:"real",title:"RealPlayer",types:"ra,ram,rm,rpm,rv,smi,smil",mimetype:"audio/x-pn-realaudio-plugin",pluginspage:"http://www.real.com/player/",autoplayAttr:"autostart",ieAttrs:{classid:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA"}},winmedia:{name:"winmedia",title:"Windows Media",types:"asx,asf,avi,wma,wmv",mimetype:c.browser.mozilla&&j()?"application/x-ms-wmp":"application/x-mplayer2",pluginspage:"http://www.microsoft.com/Windows/MediaPlayer/",autoplayAttr:"autostart",oUrl:"url",ieAttrs:{classid:"clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6",type:"application/x-oleobject"}},iframe:{name:"iframe",types:"html,pdf"},silverlight:{name:"silverlight",types:"xaml"}};function j(){var k=navigator.plugins;for(var l=0;l<k.length;l++){var m=k[l];if(m.filename=="np-mswmp.dll"){return true}}return false}var a=1;for(var h in c.fn.media.defaults.players){var d=c.fn.media.defaults.players[h].types;c.each(d.split(","),function(k,l){if(e(l[0])){l="fn"+l}c.fn.media[l]=c.fn.media[h]=b(h);c.fn.media[l+"_player"]=c.fn.media.defaults.players[h]})}function i(){var l="";for(var k in c.fn.media.defaults.players){if(l.length){l+=","}l+=c.fn.media.defaults.players[k].types}return new RegExp("\\.("+l.replace(/,/ig,"|")+")\\b")}function b(k){return function(m,l){return f(m,l,k)}}function e(k){return"0123456789".indexOf(k)>-1}function g(m,x){x=x||{};var v=c(m);var u=m.className||"";var t=c.metadata?v.metadata():c.meta?v.data():{};t=t||{};var s=t.width||parseInt(((u.match(/w:(\d+)/)||[])[1]||0));var n=t.height||parseInt(((u.match(/h:(\d+)/)||[])[1]||0));if(s){t.width=s}if(n){t.height=n}if(u){t.cls=u}var r=c.fn.media.defaults;var q=x;var o=t;var l={params:{bgColor:x.bgColor||c.fn.media.defaults.bgColor}};var k=c.extend({},r,q,o);c.each(["attrs","params","flashvars","silverlight"],function(p,w){k[w]=c.extend({},l[w]||{},r[w]||{},q[w]||{},o[w]||{})});if(typeof k.caption=="undefined"){k.caption=v.text()}k.src=k.src||v.attr("href")||v.attr("src")||"unknown";return k}c.fn.media.swf=function(o,k){if(!window.SWFObject&&!window.swfobject){if(k.flashvars){var s=[];for(var q in k.flashvars){s.push(q+"="+k.flashvars[q])}if(!k.params){k.params={}}k.params.flashvars=s.join("&")}return f(o,k,"flash")}var m=o.id?(' id="'+o.id+'"'):"";var t=k.cls?(' class="'+k.cls+'"'):"";var r=c("<div"+m+t+">");if(window.swfobject){c(o).after(r).appendTo(r);if(!o.id){o.id="movie_player_"+a++}swfobject.embedSWF(k.src,o.id,k.width,k.height,k.flashVersion,k.expressInstaller,k.flashvars,k.params,k.attrs)}else{c(o).after(r).remove();var n=new SWFObject(k.src,"movie_player_"+a++,k.width,k.height,k.flashVersion,k.bgColor);if(k.expressInstaller){n.useExpressInstall(k.expressInstaller)}for(var l in k.params){if(l!="bgColor"){n.addParam(l,k.params[l])}}for(var q in k.flashvars){n.addVariable(q,k.flashvars[q])}n.write(r[0])}if(k.caption){c("<div>").appendTo(r).html(k.caption)}return r};c.fn.media.flv=c.fn.media.mp3=function(n,o){var p=o.src;var m=/\.mp3\b/i.test(p)?c.fn.media.defaults.mp3Player:c.fn.media.defaults.flvPlayer;var l=o.flvKeyName;p=encodeURIComponent(p);o.src=m;o.src=o.src+"?"+l+"="+(p);var k={};k[l]=p;o.flashvars=c.extend({},k,o.flashvars);return c.fn.media.swf(n,o)};c.fn.media.xaml=function(q,r){if(!window.Sys||!window.Sys.Silverlight){if(c.fn.media.xaml.warning){return}c.fn.media.xaml.warning=1;alert("You must include the Silverlight.js script.");return}var p={width:r.width,height:r.height,background:r.bgColor,inplaceInstallPrompt:r.silverlight.inplaceInstallPrompt,isWindowless:r.silverlight.isWindowless,framerate:r.silverlight.framerate,version:r.silverlight.version};var n={onError:r.silverlight.onError,onLoad:r.silverlight.onLoad};var o=q.id?(' id="'+q.id+'"'):"";var m=r.id||"AG"+a++;var l=r.cls?(' class="'+r.cls+'"'):"";var k=c("<div"+o+l+">");c(q).after(k).remove();Sys.Silverlight.createObjectEx({source:r.src,initParams:r.silverlight.initParams,userContext:r.silverlight.userContext,id:m,parentElement:k[0],properties:p,events:n});if(r.caption){c("<div>").appendTo(k).html(r.caption)}return k};function f(q,k,u){var z=c(q);var n=c.fn.media.defaults.players[u];if(u=="iframe"){var n=c('<iframe width="'+k.width+'" height="'+k.height+'" >');n.attr("src",k.src);n.css("backgroundColor",n.bgColor)}else{if(c.browser.msie){var t=['<object width="'+k.width+'" height="'+k.height+'" '];for(var w in k.attrs){t.push(w+'="'+k.attrs[w]+'" ')}for(var w in n.ieAttrs||{}){var x=n.ieAttrs[w];if(w=="codebase"&&window.location.protocol=="https:"){x=x.replace("http","https")}t.push(w+'="'+x+'" ')}t.push("></object>");var m=['<param name="'+(n.oUrl||"src")+'" value="'+k.src+'">'];for(var w in k.params){m.push('<param name="'+w+'" value="'+k.params[w]+'">')}var n=document.createElement(t.join(""));for(var r=0;r<m.length;r++){n.appendChild(document.createElement(m[r]))}}else{if(n.standards){var t=['<object type="'+n.mimetype+'" width="'+k.width+'" height="'+k.height+'"'];if(k.src){t.push(' data="'+k.src+'" ')}t.push(">");t.push('<param name="'+(n.oUrl||"src")+'" value="'+k.src+'">');for(var w in k.params){if(w=="wmode"&&u!="flash"){continue}t.push('<param name="'+w+'" value="'+k.params[w]+'">')}t.push("<div><p><strong>"+n.title+" Required</strong></p><p>"+n.title+' is required to view this media. <a href="'+n.pluginspage+'">Download Here</a>.</p></div>');t.push("</object>")}else{var t=['<embed width="'+k.width+'" height="'+k.height+'" style="display:block"'];if(k.src){t.push(' src="'+k.src+'" ')}for(var w in k.attrs){t.push(w+'="'+k.attrs[w]+'" ')}for(var w in n.eAttrs||{}){t.push(w+'="'+n.eAttrs[w]+'" ')}for(var w in k.params){if(w=="wmode"&&u!="flash"){continue}t.push(w+'="'+k.params[w]+'" ')}t.push("></embed>")}}}var l=q.id?(' id="'+q.id+'"'):"";var y=k.cls?(' class="'+k.cls+'"'):"";var s=c("<div"+l+y+">");z.after(s).remove();(c.browser.msie||u=="iframe")?s.append(n):s.html(t.join(""));if(k.caption){c("<div>").appendTo(s).html(k.caption)}return s}})(jQuery);